<h1 class="text-center p-5"><%= @word.consecutive_correct_answers %></h1>

<%= form_tag verify_word_path(@word), method: :get do %>
    <%= hidden_field_tag :translation, params[:translation] %>
    <%= hidden_field_tag :smart_mode, params[:smart_mode] %>

    <div id="accordion">
        <div class='form-group'>
            <%= label_tag :example, nil, data: {toggle: "collapse", target: "#collapseOne"}, aria: {expanded: true, controls: "collapseOne"} %>
            <div id="collapseOne" class='<%= "collapse #{"show" if @translation == :de_en}"%>'>
                <div class="form-control h-auto p-3">
                    <%= highlight(@word.example, @word.keyword.split(', '), highlighter: '<u>\1</u>') if @word.example.present? && @word.keyword.present? %>
                </div>
            </div>
        </div>
    </div>

    <div id="accordion">
        <div class='form-group'>
            <%= label_tag :word, nil, data: {toggle: "collapse", target: "#collapseTwo"}, aria: {expanded: true, controls: "collapseTwo"} %>
            <div id="collapseTwo" class='<%= "collapse #{"show" if @word.example.blank? || @translation == :en_de}"%>'>
                <div class="input-group mb-3">
                    <% unless @word.article_none? %>
                        <div class="input-group-prepend">
                            <span class="input-group-text" id="basic-addon1"><%= @word.article %></span>
                        </div>
                    <% end %>
                    <%= text_field_tag :word, @translation == :de_en ? @word.word : '', class: 'form-control', required: true, autocomplete: 'off', autofocus: @translation == :en_de %>
                </div>
            </div>
        </div>
    </div>

    <div id="accordion">
        <div class='form-group'>
            <%= label_tag :notes, nil, data: {toggle: "collapse", target: "#collapseThree"}, aria: {expanded: true, controls: "collapseThree"} %>
            <div id="collapseThree" class="collapse">
                <div class="card card-body">
                    <%= @word.notes %>
                </div>
            </div>
        </div>
    </div>

    <div class='form-group'>
        <%= label_tag :meaning %>
        <%= text_field_tag :meaning, @translation == :en_de ? @word.meaning : '', class: 'form-control', required: true, autocomplete: 'off', autofocus: @translation == :de_en %>
        <small id="notoverbs" class="form-text text-muted">You don't need to prefix verbs with "to" </small>
    </div>
    <%= submit_tag 'Verify', class: 'btn btn-info' %>
    <% if word.updated_at > 3.day.ago %>
        <%= link_to 'LEARNED!', word_path(@word, word: {learned: true}), method: :put, class: 'btn btn-warning' %>
    <% end %>
<% end %>
